# sample01.md

## 16章：複数の型をまとめる

## 異なる型の変数をまとめる

### まとめてデータを扱いたい場合

第13章では、同じ型の複数の変数をまとめて扱う配列を説明しました。
しかし、場合によっては、異なる型もまとめて扱いたい場合があります。
また、各要素を番号で区別するよりも、名前で区別した方が便利なこともあります。

たとえば、学校で生徒の身体測定の結果を保存しておきたい場合には、各生徒につき、

- クラス
- 学年
- 出席番号
- 名前
- 身長
- 体重

などのデータが必要です。
これを、素直に変数で用意した場合、次のようになります。

```c
int year;       /* 学年 */
int clas;       /* クラス */
int number;     /* 出席番号 */
char name[64]   /* 名前 */
double stature; /* 身長 */
double weight;  /* 体重 */
```

---

clas?

clas は class が正しいスペルです。
ですが、classという名前は使用できないため、あえてclasにしています。

なぜなら、ほとんどのC言語コンパイラはC++にも対応していますが、C++には、クラスという機能があり、class はその機能のために使用されています。
つまり、C++では class は予約語となっているため、名前には使用できないのです。
clas が気にならなければ group にすることもできます。

---

身長と体重は、小数第1位まで表現することが多いので、実数型にしています。

当然、これでも、生徒のデータとして十分機能します。
しかし、これらのデータは、すべて関連したデータであるにも関わらず、1つ1つが別の変数として宣言されているため、あまりわかりやすくありません。

このような場合に、複数の異なる型の変数を1つにまとめて取り扱う方法として、構造体という機能が用意されています。

---

キーワード: 構造体

複数の異なる型をまとめて作られた型のこと。

---

構造体では、複数の型をまとめた新しい型を作り出すことができます。
たとえば、生徒のデータを新しい型の構造体として作るには、次のようにします。

```c
struct student
{
    int year;       /* 学年 */
    int clas;       /* クラス */
    int number;     /* 出席番号 */
    char name[64];  /* 名前 */
    double stature; /* 身長 */
    double weight;  /* 体重 */
}
```

構造体の型を宣言するときには、始めにstruct(ストラクト)をつけます。
その次には、変数と同じルールの元、新しく宣言する構造体の型名を付けます。
この型名をとくに、構造体タグ名と呼ぶことがあります。

---

キーワード: 構造体タグ名

作成した構造体それ自体の名前。
型名ではないため、扱い方は少し異なります。

---

今回は、生徒ということで、studentという名前をつけています。
後は、 {} で囲んだ中に、まとめたい変数の型と名前を宣言します。

このようにして、新しい構造体の型を作ることができますが、これだけでは、単に型を宣言しただけなので、実際に使うことは出来ません。
実際に使うためには、構造体の型の変数を宣言する必要があります。
構造体の型の変数を宣言するには、次のようにします。

```c
/* 構造体の型の変数を宣言 */
struct student data;
```

この例では、student構造体タグの、data構造体変数を宣言しています。
構造体タグの変数を宣言する場合、始めにstructをつけます。
次に、構造体の型名、最後に、構造体変数の名前を指定します。
以後、

- 構造体の型 を 構造体タグ
- 構造体タグで宣言された変数 を 構造体変数

と呼びます。

---

C++では

C言語の拡張版であるC++では
structをつけなくても構造体変数を宣言できます。
現在のコンパイラはほとんどがC++用なので、
structをつけなくても動作してしまうことが多いようです。

---
